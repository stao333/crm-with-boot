/*
 * jNotify jQuery Plug-in
 *
 * Copyright 2013 Giva, Inc. (http://www.givainc.com/labs/)
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * 	http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Date: 2014-07-10
 * Rev:  1.2.00
 */
(function(B){B.jnotify=function(K,M,L){return new C(K,M,L)};B.jnotify.version="1.2.00";var J,D=[],F=0,H=false,I=false,E,A={type:"",delay:2000,sticky:false,clickToDismiss:true,closeLabel:"&times;",showClose:true,fadeSpeed:1000,slideSpeed:250,classContainer:"jnotify-container",classNotification:"jnotify-notification",classDismissible:"jnotify-dismissible",classBackground:"jnotify-background",classClose:"jnotify-close",classMessage:"jnotify-message",init:null,create:null,beforeRemove:null,remove:null,transition:null};B.jnotify.setup=function(K){A=B.extend({},A,K)};B.jnotify.play=function(M,N){if(H&&(M!==true)||(D.length==0)){return }H=true;var L=D[0];var K=(arguments.length>=2)?parseInt(N,10):L.options.delay;E=setTimeout(function(){E=0;L.remove(function(){if(D.length==0){H=false}else{if(!I){B.jnotify.play(true)}}})},K)};B.jnotify.pause=function(){clearTimeout(E);I=H=true};B.jnotify.resume=function(){I=false;B.jnotify.play(true,0)};function G(M,L,K,N){if("delegate" in jQuery.fn){M.delegate(K,L,N)}else{M.on(L,K,N)}}function C(R,P){var O=this,M=typeof P;if(M=="number"){P=B.extend({},A,{delay:P})}else{if(M=="boolean"){P=B.extend({},A,{sticky:true})}else{if(M=="string"){P=B.extend({},A,{type:P,delay:((arguments.length>2)&&(typeof arguments[2]=="number"))?arguments[2]:A.delay,sticky:((arguments.length>2)&&(typeof arguments[2]=="boolean"))?arguments[2]:A.sticky})}else{P=B.extend({},A,P)}}}this.id=F++;this.options=P;if(!J){J=B('<div class="'+A.classContainer+'" />').appendTo("body");if(B.isFunction(P.init)){P.init.apply(O,[J])}function L(S){var T=S.data("jnotify");T.options.fadeSpeed=250;T.remove()}G(J,"click.jnotify","a."+P.classClose,function(S){L(B(S.currentTarget).closest("."+P.classNotification))});G(J,"click.jnotify","div."+P.classDismissible,function(S){L(B(S.currentTarget))})}function Q(U){var T='<div class="'+P.classNotification+(P.type.length?(" "+P.classNotification+"-"+P.type):"")+(P.clickToDismiss&&!P.sticky?(" "+P.classDismissible):"")+'"><div class="'+P.classBackground+'"></div>'+(P.sticky&&P.showClose?('<a class="'+P.classClose+'">'+P.closeLabel+"</a>"):"")+'<div class="'+P.classMessage+'"><div>'+U+"</div></div></div>";var S=B(T);S.data("jnotify",O);S.appendTo(J);if(B.isFunction(P.create)){P.create.apply(O,[S,J])}return S}function K(T){for(var S=0;S<D.length;S++){if(T.id===D[S].id){D.splice(S,1);break}}}this.remove=function(V){var S=N.find("."+P.classMessage),T=S.parent();K(O);if(B.isFunction(P.beforeRemove)){P.beforeRemove.apply(O,[S])}function U(){T.remove();if(B.isFunction(V)){setTimeout(function(){V.apply(O,[S])},1)}if(B.isFunction(P.remove)){setTimeout(function(){P.remove.apply(O,[S])},1)}}if(B.isFunction(P.transition)){P.transition.apply(O,[T,S,D.length-1,U,P])}else{S.fadeTo(P.fadeSpeed,0.01,function(){if(D.length===0){U()}else{T.slideUp(P.slideSpeed,U)}});if(D.length<=0){T.fadeOut(P.fadeSpeed)}}};var N=Q(R);if(!P.sticky){D.push(this);B.jnotify.play()}return this}})(jQuery);